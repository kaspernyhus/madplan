{% extends 'base.html' %}

{% load static %}

{% block content %}


<h1 class="header">{{recipe.name}}</h1>
<h6 class="header">Ændret {{recipe.date|date:'d/m/Y'}}</h6>
<br>

<div class="center-nav">
  <button class="nav-but active" id="but1" onclick="showBlock1()">Ingredienser</button>
  <button class="nav-but" id="but2" onclick="showBlock2()">Fremgangsmåde</button>
</div>

<div id="Block1">
<table class="center">
  <tbody>
  <form method="POST">
    {% csrf_token %}
    {% for recipe_ingredient in recipe_ingredients %}
    <tr>
      <td>
        <span>{{recipe_ingredient.name}}</span>
      </td>
      <td>
        <span>{% if recipe_ingredient.description %} {{recipe_ingredient.description}} {% endif %}</span>
      </td>
      <td>
        <input type="number" id="qty" value="{{recipe_ingredient.amount}}" name="qty" min="0" max="1000" step="0.1"> {{recipe_ingredient.unit}}
        <input type="hidden" id="ingredient_id" name="ingredient_id" value="{{recipe_ingredient.ingredient_id}}">
      </td>
      <td>
        <button type="submit" class="delete_cross" id="delete_ingredient" name="delete_ingredient" value="{{recipe_ingredient.id}}">x</button>
      </td>
    </tr>
    {% endfor %}
  </tbody>
</table>
<div class="center">
<button type="submit" name="edit_quantities" value="">Gem</button>
</div>
</form>



<div class="center">
<h6>Tilføj en ingrediens</h6>
<form method="POST">
  {% csrf_token %}
  <input type="text" list="ingredient_list" name="ingredient" placeholder="Vælg ingrediens..">
  <datalist id="ingredient_list">
    {% for ingredient in all_ingredients %}
      <option value="{{ ingredient.name }}{% if ingredient.description %}, {{ingredient.description}} {% endif %}">
    {% endfor  %}
  </datalist>
  
  <input type="number" name="qty" value="" placeholder="hvor meget.." required>
  
  <select list="qty_units" name="qty_unit" value="" placeholder="enhed.." required>
    {% for unit in units %}
      <option value="{{ unit.unit_name }}">{{ unit.unit_name }}</option>
    {% endfor %}
  </select>

  <button type="submit" name="add_ingredient">tilføj</button>
</form>
</div>


<a href="{% url 'new_ingredient' %}?next={{ request.path }}" class="center">Opret ny ingrediens</a>
</div>

<div id="Block2">
  <div class="center">
    <form method="POST" id="instructions">
      {% csrf_token %}
      {% for instruction in instructions %}
        <textarea class="center instr-text" name="textarea_instructions" form="instructions">{{instruction.description}}</textarea>
      {% endfor %}
        <textarea class="center instr-text" name="new_instruction" form="instructions"></textarea>
      <button type="submit" name="edit_instructions">gem</button>
    </form>
  </div>
</div>


  
{% endblock %}