{% extends 'base.html' %}

{% load static %}

{% block content %}
{% load l10n %}

<div class="">
  
  <div class="recipe-top" style="background-image: url('/media/{{ recipe.photo_thumbnail }}');">
    <span class="recipe-header">
      <h1 class="header">{{recipe.name}}</h1>
      <p class="subheader">{{recipe.description}}</p>
    </span>
  </div>

  <div class="center-nav">
    <button class="nav-but active" id="but1" onclick="showBlock1()">Ingredienser</button>
    <button class="nav-but" id="but2" onclick="showBlock2()">Fremgangsmåde</button>
  </div>

  <div id="Block1" class="center container">
    <div class="center">
      <div class="flex">
        <form method="GET" name="qtymultiplier" action="{% url 'show_recipe' recipe.id %}">
          <input type="number" class="qty-multiplier" value="{{ recipe.qty_multiply|unlocalize }}" lang="us-en" name="qtymultiplier" id="qtymultiplier" min="0" max="10" step="0.5">
          <label id="qty_multiplier">portioner</label>
        </form>
          <a href="{% url 'create_shoppinglist' recipe.id 'recipe' %}" class="sml-button">Opret indkøbsseddel</a>
      </div>
    </div>

    <table class="center">
    <tbody class="table-body">
    {% for ingredient in ingredients %}
    {% if ingredient.heading %}
    </tbody>
    <th style="background-color:hsl(214, 100%, 90%)">
        <span class="bold-instr">{{ingredient.heading}}</span>
    </th>
    <tbody class="table-body">
    {% else %}
    <tr>
      <td>
        <span>{{ingredient.name}}</span>
      </td>
      <td>
        <span>{% if ingredient.description %} {{ingredient.description}} {% endif %}</span>
      </td>
      <td>
        <span>{% if ingredient.recipe_ingredient_description %} {{ingredient.recipe_ingredient_description}} {% endif %}</span>
      </td>
      <td>
        <span>{{ingredient.amount}} {{ingredient.unit}}</span>
      </td>
    </tr>
    {% endif %}
    {% endfor %}
    </tbody>
    </table>
  </div>

  <div id="Block2" class="center container">
    <ul class="center no-margin-top">
      {% for instruction in instructions %}
      {% if instruction.is_bold %}
      <li class="instructions bold-instr"> <b>{{ instruction.description }}</b> </li>
      {% else %}
      <li class="instructions">{{ instruction.description }}</li>
      {% endif %}
      
      {% endfor %}
    </ul>
    <div class="center">
      {% if recipe.URL %}
        <a href="{{ recipe.URL }}" target="_blank">{{ recipe.URL }}</a>
      {% endif %}
    </div>
  </div>


  <br>
  <a href="{% url 'edit_recipe' recipe.id %}" class="center">Rediger opskrift</a>
  <p class="small-text">Ændret {{recipe.date|date:'d/m/Y'}}</p>

</div>


<script>
  function showBlock1() {
    var block1 = document.getElementById("Block1");
    var block2 = document.getElementById("Block2");
    var but1 = document.getElementById("but1")
    var but2 = document.getElementById("but2")
    but1.classList.add('active');
    but2.classList.remove('active');
    block1.style.display = "block";
    block2.style.display = "none";
  }
  window.onload = showBlock1;
</script>

<script>
  function showBlock2() {
    var block1 = document.getElementById("Block1");
    var block2 = document.getElementById("Block2");
    var but1 = document.getElementById("but1")
    var but2 = document.getElementById("but2")
    but1.classList.remove('active');
    but2.classList.add('active');
    block1.style.display = "none";
    block2.style.display = "block";
  }
</script>
{% endblock %}